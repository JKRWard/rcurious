---
title: "R-Curious"
subtitle: "An RLadies useR! 2018 workshop for new users of R"
author: "This workshop is brought to you by RLadies: Steph, Sarah, Charles, Kim, another Sarah, Jenny, and Di"
output :
  ioslides_presentation
  # html_document: # Toggle this and comment out ioslides_presentation.
  #   toc: true
  #   toc_float: true

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Hi!

- [RLadies](https://rladies.org/)
- [useR! 2018](https://user2018.r-project.org/)

Follow us on twitter!  

[RLadiesSydney](https://twitter.com/rladiessydney) 

[RLadiesRemote](https://twitter.com/RLadiesRemote)

[RLadiesAKL](https://twitter.com/RLadiesAKL) 

[RLadiesGlobal](https://twitter.com/RLadiesGlobal)

[useR! 2018](https://twitter.com/useR2018_conf)

## Difficulty setting

Charles T. Gray plays on **normal** tidyverse difficulty setting.

Gaming difficulty:

- the pew-pew sound my gun makes startles me (this workshop)
- normal
- hardcore

***

I am here to learn from you, too. 

The plan is to live code in these notes, enabling me to edit these notes live using the wonderful [`xaringan::infinite_moon_reader`](http://slides.yihui.name/xaringan/) function, incorporating feedback.

## Notes for this workshop

We will all work from a personal copy of these slides. 

After some introductory waffling, and set-up, we'll download the file together.

You will be able to annotate these notes or write extra code examples for yourself.

Indeed, there is [little code](http://cantabile.rbind.io/2018/06/17/a-coding-workshop-without-code/) provided in these notes. But there are lots of functions. We will write the code together. 

## pseudo code

```{}
<this is pseudo code>

install.packages("<you write code here>")


```

If I wanted to install a package called `metafor`, I would use the code

```{}
install.packages("metafor")

```

Notice that we drop the `<>`. That's not code, it's *pseudo code* to highlight where your input is.

## Survival tips

Don't be afraid to harness all tools available:

- Modern day coding practice comprises almost entirely searching "how do I do `<x>` in `<language>`".
- The [community](https://community.rstudio.com/) is your best resource; talk to each other and make friends and future collaborators.  
- Cheatsheets (**Help-Cheatsheets**)

*** 

Finally, everyone needs to  [ragequit](https://www.urbandictionary.com/define.php?term=ragequit) at sometimes.

<iframe src="https://giphy.com/embed/EtB1yylKGGAUg" width="320" height="250" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/the-office-panda-rage-EtB1yylKGGAUg">via GIPHY</a></p>


## Stickynote signalling

### yellow 

Yup, all good.

### pink (the ragequit option)

Some assistance would be greatly appreciated. 
Also, I think I broke the internet. 

<center>
<img src="https://memegenerator.net/img/instances/71995321.jpg" style="width:50%">
</center>




# What is R?

## What do R-users use R for?

R users are data detectives.

We're going to try to cover everything except *Model*.

<center>
![](https://github.com/hadley/r4ds/blob/master/diagrams/data-science-explore.png?raw=true)
</center>

This image is from [R for Data Science](http://r4ds.had.co.nz/), a great text to get started with. It's available online as a free ebook.

For us to learn how to be data detectives, we'll need some data.

# A fitting dataset

## A fitting dataset

To familiarise ourselves with R, we will do what R users do.

We will explore a dataset.

A fitting dataset. 

A few images to explain why a dataset about witch trials might be appropriate for a workshop hosted by an advocacy group for underrepresented genders.

## Image search for "witch" + "michelle wolf"

<center>
<img src="https://steemitimages.com/DQmRquBByC9rwriPGJgp3uHy4Hatg9gTQzDicgGiiX1uAzi/MichelleWolfWickedWitch_13.png" style="width:60%">
</center>

## Image search for "witch" + "julia gillard"

<center>
<img src="https://static.ffx.io/images/$zoom_1%2C$multiply_0.512%2C$ratio_1.777778%2C$width_2000%2C$x_0%2C$y_23/t_crop_custom/t_sharpen%2Cq_auto%2Cf_auto/415251affe0440a502699c0723e8229e86270864" style="width:70%">
</center>


## Image search for "witch" + "hillary clinton"

<center>
<img src="http://wp.production.patheos.com/blogs/panmankey/files/2016/11/1-hillary-witch-2-768x432.jpg" style="width:80%">
</center>

# Questions, questions that need answering

## What would you like to know?


*Group discussion*

What would you like to know?

*Write questions on whiteboard*

```{r echo = FALSE}
# Below, the <center> syntax is html to centre the gif within. Notice that it is the same syntax as importing a png, jpg, or pdf image. 

# Rmarkdown and chunks support latex, html, bash, python, and whatnot. Due to this flexibility, for some researchers, such as Charles, it is their preferred working document type.  

```

<center>
<img src="https://alloftheones.files.wordpress.com/2014/04/ezgif-save.gif" style="width:60%">
</center>

## How to answer these questions?

For *this* workshop:

- [language](https://www.r-project.org/): R
- [Integrated development environment (IDE)](https://en.wikipedia.org/wiki/Integrated_development_environment): RStudio

### Why these tools?

- R was intentionally developed to be a data analysis language (aeroplane) 
- RStudio is designed to help users use R (airport)

"The plane is pretty boring without the airport around it."

(Tip of the hat to Julia Lowndes for the aeroplane analogy.)


# Installation hell

## Installation overview

- install R (quick) 
- install RStudio (a little while)

Installation instructions [adapted](https://github.com/rladies/meetup-presentations_london/blob/master/2016-04_Beginners_DropIn/April_DropIn.Rmd) with appreciation from a previous workshop. 

## Install R on Mac or Windows

Go to the [Comprehensive R Archive Network](https://cran.r-project.org/)(CRAN) website.

It was first in a google search for 'cran' in June 2018.

***

### For Mac users

- Click on **Download R for (Mac) OS X** 
- Look at the top link under **Latest release**, which at time of writing is **R-3.5.0.pkg**, and download this if compatible with your current version mac OS (Mavericks 10.9 or higher). Otherwise download the version beneath it which is compatible for older mac OS versions. 

### For Windows users

- Click on **Download R for Windows** 
- Then click on the link **install R for the first time** 
- Download from the large link at the top of the page which at time of writing is **Download R 3.5.0 for Windows**. 

## Install R

- Then double click the downloaded **R-3.5.0.pkg** file and follow the prompts to install the downloaded software.

## Download & Install RStudio:

Go to the [RStudio](https://www.rstudio.com/) website.  

It was first in a google search for 'rstudio' in June 2018.

Choose **RStudio** and scroll down to the blue **Download RStudio Desktop** button. 

Click the green button to download **RStudio Desktop Open Source License** and select appropriate installer for your operating system.

Double click the installer and follow the prompts to set up RStudio. 

## Linux

To install R:

`sudo apt-get update` to update first

then

`sudo apt-get install r-base` to install R

On most distributions:

Download the [**.deb**](https://www.rstudio.com/products/rstudio/download/#download) file and double click to open the package installer.   

## Updating R and RStudio

```{r}
# Check R version
# version
```

> todo: finish this section

## 

Update R and R packages from this [blogpost](https://www.r-statistics.com/2013/03/updating-r-from-r-on-windows-using-the-installr-package/) for Windows ??

```{r}
# I'm wondering if it will not make much difference if they just reinstall it. 


# installing/loading the package:
# if(!require(installr)) {
# install.packages("installr"); require(installr)} #load / install+load installr
 
# using the package:
# updateR() # this will start the updating process of your R installation.  It will check for newer versions, and if one is available, will guide you through the decisions you'd need to make.
```


## Why RStudio?

Working in an RStudio [project](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects) has **many** benefits.

- Free, open source software R in an IDE
- Reproducible workflows

# Getting started in RStudio

## Create a project

- Open RStudio and create a project via **File-New Project**
- Select **New Directory** and choose **New Project**
- Name your project **rcurious**
- Save the project directory wherever suits you


## Argh, so many windows

*R-Ladies presenters gesticulate wildly at RStudio*

Let's start with a couple useful panes.

- Console
- Environment

### Cheat sheet

**Help-Cheatsheets-RStudio IDE Cheatsheet** 

# How to run code?!

## Running code in the Console

The console is where you can execute single-line R commands.

The console is located, by default, in the lower left pane. 

Try `3 + 2` and press **enter**:

```{r}
# Type 3 + 2 here. Here's hoping infinite moon reader works. 

```

## Environment

I can store the number 5 in an *object* `x`.

To assign a value we use an arrow `<-`.

```{}
x <- 5
```

What happens when you type `x` into the Console after assigning the value 5 to it?

What do you see in the Environment pane?

***

If I assign the value 5 to the *object* `x`, and call it in the console, it returns the value assigned.

```{r}
# Assign 5 to x and call x.
```

There are many complex data types in R.

## Data structures in R

Data *objects* can be made of

- numbers
- characters "this is a character string"
- logicals (TRUE/FALSE) 
- list (mixed)

Or tables of combinations of the above.

```{r, echo = FALSE}
# The head() function displays the top of the table. Here I asked to see the top 2 lines of the preloaded iris dataset in R. These small preloaded datasets are very handy for trying things out.

head(iris, 2)

# Notice, also, that setting echo = FALSE in this chunk prevents the code and commments from displaying in the knitted document.
```


And much more.

***

The witch trials dataset is a table.

It is a [*tidy*](https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html) data structure:

- rows are *observations*
- columns are *variables* (attributes)

## Editor

We'll do this analysis in R markdown.

- run code in *chunks*
- write in text, LaTeX, html, outside of code chunks 
- make websites, presentations, books 


# Rmarkdown

## Opening an .Rmd

Open **File-New File-R Markdown** 

Follow the prompts to install the required *packages*.  

Give your document a title and press **ok**.

This will open an *Untitled2* template. 

Save your document - note, you have given your document a title, not saved it!

Press the wheel next to the **knit** icon at the top of the Editor pane and select Viewer.

Now we will *knit* our document.

## The tutorial document

A treasure trove! 

## Get these notes

Delete everything in your .Rmd file.

Look up `softloud charles gray github`

You want to navigate to: https://github.com/softloud

Click on **rcurious** in my Pinned repositories.

Click on **workshop** and then **workshop.Rmd** and then click the **Raw** button and copy and paste the text into your .Rmd file.

- **control + a** to select all 
- **control + c** to copy
- **control + v** to paste

## Knit the notes

**control + shift + k** to knit

But it is annoying having a pop out window, so let's view these notes in the Viewer pane.

We are going to modify the YAML at the top of the document so that you can see how to toggle a presentation into notes. 

Change the output settings at the top of this document to:

```
output :
  # ioslides_presentation 
  html_document: 
     toc: true
     toc_float: true
```

Knit again. We're almost ready to begin our analysis.

# Packages

## Packages

Packages are collections of other people's code.

Often someone has already written a script that does what you want to do.

For example, we want to import the witch trials data. We will use a package that helps with data wrangling tasks like this, the [`tidyverse`](https://www.tidyverse.org/). 

We're going to use the metapackage `tidyverse` to help us with our data analysis. 

## Functions

We will use functions to intall and load the `tidyverse`.

Functions in R take the form `function()`

To learn more about a function, type `?function` into the Console, and the Help pane will display documentation. 

### Your turn

We want to install the package `tidyverse`.

Take a look at the help documentation for the function `install.packages()`.

## 

### For installation; i.e., first time only.
`install.packages("arbitrarypkg")`
 
### For using.
`library(arbitrarypkg)`

We would like to install and use a package called "tidyverse". Let's try.

## Let's load the tidyverse 

Press the little document outline button in the top right corner of the Editor pane.

Navigate to this part of your notes.

```{r Load the tidyverse package}
# This is a code chunk. 

# We can write informative comments with a hash # at the start.

# Load the tidyverse using the library() function.
library(tidyverse)

```

# Importing data



## Import the witch trials data

Since the data is stored on an online repository, we can import it via url. 

We can import this data using the `read_csv()` function from the `tidyverse`. 

**This function takes one argument, the url, which goes between the () as a "character string".**   

## Your turn

The data is found here: "https://raw.githubusercontent.com/JakeRuss/witch-trials/master/data/trials.csv"

Try importing the data at the console with `read_csv`. What output do you see?

`read_csv` with the argument url produces a data object. An object we can assign.

Open a code chunk *here* and read the data in using `read_csv` and assign `<-` the data to an object called `witchdat`

- **control+alt+i** to open a code chunk. 
- press green **play** to run chunk.

## Take a look

What do you see in your Environment?

Click on it!

## Data wrangling

This workshop is based on Steph de Silva's wonderful 


## Installing packages

In R, the fundamental unit of shareable code is an [R package](http://r-pkgs.had.co.nz/intro.html). 

R packages are available from [The Comprehensive R Archive Network(CRAN)](https://cran.r-project.org/) or github.

We're going to use the metapackage `tidyverse` available from CRAN to help us with our data analysis. 


## Import example: url

```{}
# Store a string in an object.
url <- <character string>

# Read data using a tidyverse function. 
db <- read_csv(url)
# We can also write this function with the package name, ie the read_csv function from the readr package
db <- readr::read_csv(url)

```


## Import data example 
[suggest taking this out as it is covered into rcurious-witcg-trials.csv]

**Data Source**

The github link in this import example is https://github.com/JakeRuss/witch-trials, first take a look at the link. Click on the data folder then trials.csv. In order to import the data we need a **direct** link to the data. You can find this with the button in github RAW. This is the url we want to use.

We will use a function called **read_csv** to load the data into a variable called **witchdat**


```{r import data}
url <- "https://raw.githubusercontent.com/JakeRuss/witch-trials/master/data/trials.csv"

witchdat <- read_csv(url)
```

This data has been loaded into witchdat in R, take a look at the environment window.

# Exploratory data analysis

## The command line 

> todo: move this slide somewhere else, perhaps - sticking it here for now.

At some point you'll need to use the command line.

To break ourselves in, let's check what version of R we are running. 

```{zsh }
# R --version
```

## Working in projects

- Put each project in its own directory, which is named after the project.
- Put text documents associated with the project in the doc directory.
- Put raw data and metadata in the data directory, and files generated during cleanup and analysis in a results directory.
- Put source for the project’s scripts and programs in the src directory, and programs brought in from elsewhere or compiled locally in the bin directory.
- Name all files to reflect their content or function.

***

A recommendation on how to organize your R project from [Good Enough Practices for Scientific Computing](https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/good-enough-practices-for-scientific-computing.pdf) as summarized by Software Carpentry 



# References

## References and further reading

- [R for Data Science](http://r4ds.had.co.nz/)
- The installation instructions are [adapted](https://github.com/rladies/meetup-presentations_london/blob/master/2016-04_Beginners_DropIn/April_DropIn.Rmd) from a previous workshop. 
