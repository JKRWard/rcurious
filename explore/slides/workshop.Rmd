---
title: "R-Curious"
subtitle: "An RLadies useR! 2018 workshop for new users of R"
author: "This workshop is brought to you by RLadies: Steph, Sarah, Charles, Kim, another Sarah, Jenny, and Di"
output :
  # ioslides_presentation

  html_document: # Toggle this and comment out ioslides_presentation.
    toc: true
    toc_float: true

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = TRUE)
```

## Hi!

- [RLadies](https://rladies.org/)
- [useR! 2018](https://user2018.r-project.org/)

Follow us on twitter!  

[RLadiesSydney](https://twitter.com/rladiessydney) 

[RLadiesRemote](https://twitter.com/RLadiesRemote)

[RLadiesAKL](https://twitter.com/RLadiesAKL) 

[RLadiesGlobal](https://twitter.com/RLadiesGlobal)

[useR! 2018](https://twitter.com/useR2018_conf)

## Stickynote signalling

### yellow := all good

### pink := some assistance would be greatly appreciated  

![](https://memegenerator.net/img/instances/71995321.jpg)


# What is R?

## What do R-users use R for?

We're going to try to cover everything except *Model*.

<center>
![](https://github.com/hadley/r4ds/blob/master/diagrams/data-science-explore.png?raw=true)
</center>

This image is from [R for Data Science](http://r4ds.had.co.nz/), a great text to get started with. It's available online as a free ebook.

# A fitting dataset

## A fitting dataset

To familiarise ourselves with R, we will do what R users do.

We will explore a dataset.

A fitting dataset. 

A few images to explain why a dataset about witch trials might be appropriate for a workshop hosted by an advocacy group for underrepresented genders.

## Image search for "witch" + "michelle wolf"

![](https://steemitimages.com/DQmRquBByC9rwriPGJgp3uHy4Hatg9gTQzDicgGiiX1uAzi/MichelleWolfWickedWitch_13.png)

## Image search for "witch" + "julia gillard"

![](https://static.ffx.io/images/$zoom_1%2C$multiply_0.512%2C$ratio_1.777778%2C$width_2000%2C$x_0%2C$y_23/t_crop_custom/t_sharpen%2Cq_auto%2Cf_auto/415251affe0440a502699c0723e8229e86270864)

## Image search for "witch" + "hillary clinton"

![](http://wp.production.patheos.com/blogs/panmankey/files/2016/11/1-hillary-witch-2-768x432.jpg)

# Questions, questions that need answering

## What would you like to know?


*Group discussion*

What would you like to know?

*Write questions on whiteboard*

```{r echo = FALSE}
# Below, the <center> syntax is html to centre the gif within. Notice that it is the same syntax as importing a png, jpg, or pdf image. 

# Rmarkdown and chunks support latex, html, bash, python, and whatnot. Due to this flexibility, for some researchers, such as Charles, it is their preferred working document type.  

```

<center>
![](https://alloftheones.files.wordpress.com/2014/04/ezgif-save.gif)
</center>

## How to answer these questions?

For *this* workshop:

- [language](https://www.r-project.org/): R
- [Integrated development environment (IDE)](https://en.wikipedia.org/wiki/Integrated_development_environment): RStudio

### Why these tools?

- R was intentionally developed to be a data analysis language (aeroplane) 
- RStudio is designed to help users use R (airport)

"The plane is pretty boring without the airport around it."

(Tip of the hat to Julia Lowndes for the aeroplane analogy.)


# Installation hell

## Installation overview

- install R (quick) 
- install RStudio (a little while)

The installation instructions [adapted](https://github.com/rladies/meetup-presentations_london/blob/master/2016-04_Beginners_DropIn/April_DropIn.Rmd) with appreciation from a previous workshop. 

## Install R on Mac or Windows

Go to the [Comprehensive R Archive Network](https://cran.r-project.org/)(CRAN) website.

It was first in a google search for 'cran' in June 2018.

***

### For Mac users

- Click on **Download R for (Mac) OS X** 
- Look at the top link under **Latest release**, which at time of writing is **R-3.5.0.pkg**, and download this if compatible with your current version mac OS (Mavericks 10.9 or higher). Otherwise download the version beneath it which is compatible for older mac OS versions. 

### For Windows users

- Click on **Download R for Windows** 
- Then click on the link **install R for the first time** 
- Download from the large link at the top of the page which at time of writing is **Download R 3.5.0 for Windows**. 

## Install R

- Then double click the downloaded **R-3.5.0.pkg** file and follow the prompts to install the downloaded software.

## Download & Install RStudio:

Go to the [RStudio](https://www.rstudio.com/) website.  

It was first in a google search for 'rstudio' in June 2018.

Choose **RStudio** and scroll down to the blue **Download RStudio Desktop** button. 

Click the green button to download **RStudio Desktop Open Source License** and select appropriate installer for your operating system.

Double click the installer and follow the prompts to set up RStudio. 

## Linux

To install R:

`sudo apt-get update` to update first

then

`sudo apt-get install r-base` to install R

On most distributions:

Download the [**.deb**](https://www.rstudio.com/products/rstudio/download/#download) file and double click to open the package installer.   

## Updating R and RStudio

```{r}
# Check R version
version
```

> todo: finish this section

## 

Update R and R packages from this [blogpost](https://www.r-statistics.com/2013/03/updating-r-from-r-on-windows-using-the-installr-package/) for Windows ??

```{r}
# installing/loading the package:
if(!require(installr)) {
install.packages("installr"); require(installr)} #load / install+load installr
 
# using the package:
# updateR() # this will start the updating process of your R installation.  It will check for newer versions, and if one is available, will guide you through the decisions you'd need to make.
```


## Why RStudio?

Working in an RStudio project has many benefits.

- Free, open source software R in an IDE
- Reproducible workflows

## Getting started in RStudio

*R-Ladies presenters gesticulate wildly at RStudio*

Particularly useful panes: 

- Help
- Console
- Environment
- Editor
- Viewer

### Cheat sheet

**Help-Cheatsheets-RStudio IDE Cheatsheet** 

RStudio [projects](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects) 
> make it straightforward to divide your work into multiple contexts, each with their own working directory, workspace, history, and source documents.

A recommendation on how to organize your R project from [Good Enough Practices for Scientific Computing](https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/good-enough-practices-for-scientific-computing.pdf) as summarized by Software Carpentry 

- Put each project in its own directory, which is named after the project.
- Put text documents associated with the project in the doc directory.
- Put raw data and metadata in the data directory, and files generated during cleanup and analysis in a results directory.
- Put source for the projectâ€™s scripts and programs in the src directory, and programs brought in from elsewhere or compiled locally in the bin directory.
- Name all files to reflect their content or function.

## Your turn!

Now create an R Project which divides your work in 
- Open RStudio and create a project via **File-New Project**
- Select **New Directory** and choose **New Project**
- Name your project **rcurious**
- Save the project directory wherever suits you

# How to run code?!

## Running code in the Console

The console is where you can execute single-line R commands.

The console is located, by default, in the lower left pane. 

Try `3 + 2` and run using **ctrl-enter** or the play button:

```{r}
# Annotate with comments using the #. If you precede anything with this sign, R will ignore it.
3 + 2
```

We can annotate a script with comments using the #. If you precede anything with this sign, R will ignore it.

## Installing packages

In R, the fundamental unit of shareable code is an [R package](http://r-pkgs.had.co.nz/intro.html). 

R packages are available from [The Comprehensive R Archive Network(CRAN)](https://cran.r-project.org/) or github.

We're going to use the metapackage `tidyverse` available from CRAN to help us with our data analysis. 

***

### For installation; i.e., first time only.
`install.packages("arbitrarypkg")`
 
### For loading every time we start a new R session. Typically this is at the top of the script.
`library(arbitrarypkg)`

I can store the number 5 in an *object* `x`.

To assign a value we use an arrow `<-`.

```{}
x <- 5
```

What happens when you type `x` into the Console after assigning the value 5 to it?

What do you see in the Environment pane?

(**control + 8** to switch focus to Environment pane.) 

***

```{r}
x <- 5
x
```

<<<<<<< HEAD
## Data structures in R

Data *objects* can be vectors of:
- numbers
- characters
- logical 

Or tables of data.

Today we will work with a *tidy* data structure. 

The documentation for the R package `tidyverse::` is available [here](http://tidyverse.tidyverse.org/) and [github](https://github.com/tidyverse/tidyverse)


## Source

We'll do this analysis in R markdown.

- run code in *chunks*
- write in text, LaTeX, html, outside of code chunks 
- make websites, presentations, 

# Rmarkdown

## Intro to .Rmd

Open **File-New File-R Markdown** 

This will open an *Untitled1.Rmd* template. 

# Importing data

## Data types

- todo extrapolate

To open a code chunk in your **.Rmd**: **control+alt+i**

To knit to .html in the Viewer pane: save and **control+shift+k** 



## Installing packages

We're going to use the metapackage `tidyverse` to help us with our data analysis. 

The two important functions.

### For installation; i.e., first time only.
`install.packages("arbitrarypkge")`
 
### For using.
`library(arbitrarypkg)`

## Install `tidyverse`

We would like to install a package called "tidyverse". Let's try.

## Load tidyverse

```{r}
# I ran: install.packages("tidyverse") in the console the first time.

library(tidyverse)
```




## Loading packages

```{r pkgs}
# install.packages("tidyverse") # Run this to install.

library(tidyverse)

```


## Import example: url

```{}
# Store a string in an object.
url <- <character string>

# Read data using a tidyverse function. 
db <- read_csv(url)
# We can also write this function with the package name, ie the read_csv function from the readr package
db <- readr::read_csv(url)

```


## Import data example 
[suggest taking this out as it is covered into rcurious-witcg-trials.csv]

**Data Source**

The github link in this import example is https://github.com/JakeRuss/witch-trials, first take a look at the link. Click on the data folder then trials.csv. In order to import the data we need a **direct** link to the data. You can find this with the button in github RAW. This is the url we want to use.

We will use a function called **read_csv** to load the data into a variable called **witchdat**


```{r import data}
url <- "https://raw.githubusercontent.com/JakeRuss/witch-trials/master/data/trials.csv"

witchdat <- read_csv(url)
```

This data has been loaded into witchdat in R, take a look at the environment window.

# Exploratory data analysis

## The command line 

> todo: move this slide somewhere else, perhaps - sticking it here for now.

At some point you'll need to use the command line.

To break ourselves in, let's check what version of R we are running. 

```{zsh }
R --version
```


# References

## References and further reading

- [R for Data Science](http://r4ds.had.co.nz/)
- The installation instructions are [adapted](https://github.com/rladies/meetup-presentations_london/blob/master/2016-04_Beginners_DropIn/April_DropIn.Rmd) from a previous workshop. 
